/* NetSec Academy Global Styles - Dark theme */
:root {
  --clr-bg: #000000;
  --clr-surface: #111111;
  --clr-surface-alt: #1a1a1a;
  --clr-accent: #3d7bfd;
  --clr-accent-alt: #ffb347;
  --clr-text: #ffffff;
  --clr-muted: #cccccc;
  --clr-danger: #b91c1c;
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 20px;
  --shadow-sm: 0 2px 4px rgba(0,0,0,.08);
  --shadow-md: 0 4px 18px -2px rgba(10,27,75,.18);
  --max-width: min(94vw, 1680px);
  --transition: .35s cubic-bezier(.4,0,.2,1);
  --measure: 72ch; /* ideal reading line length for long-form text */
  --sidebar-width: 300px; /* fixed max width for sidebar to prevent overpowering main content */
}
* { box-sizing: border-box; }
html { scroll-behavior: smooth; overflow-x:hidden; }
body { margin:0; font-family: 'Inter', system-ui, -apple-system,'Segoe UI',Roboto,Arial,sans-serif; background: var(--clr-bg); color: var(--clr-text); line-height:1.5; -webkit-font-smoothing:antialiased; overflow-x:hidden; }
img { max-width:100%; display:block; }
a { color: var(--clr-accent); text-decoration:none; }
a:hover, a:focus { text-decoration:underline; }

/* Layout */
.container { width:100%; max-width:var(--max-width); margin-inline:auto; padding:0 1.25rem; }
.skip-link { position:absolute; left:-999px; top:0; background: var(--clr-accent); color:#fff; padding:.5rem 1rem; z-index:1000; }
.skip-link:focus { left:0; }

.site-header { position:sticky; top:0; z-index:100; background: #111111; backdrop-filter:blur(8px); border-bottom:1px solid #333; }
.header-inner { display:flex; align-items:center; gap:2rem; min-height:64px; }
.brand { font-weight:700; font-size:1.2rem; letter-spacing:.5px; color: var(--clr-text); text-decoration:none; }
.site-nav ul { list-style:none; margin:0; padding:0; display:flex; gap:.5rem; align-items:center; }
.site-nav li { position:relative; }
.site-nav a { position:relative; display:block; padding:.7rem .95rem; border-radius:6px; font-weight:600; color: var(--clr-text); line-height:1; text-decoration:none; }
.site-nav a:hover::after, .site-nav a:focus::after, .site-nav a.active::after { transform: scaleX(1); }
.site-nav a:hover, .site-nav a:focus { text-decoration:none; }

/* Color accents for team nav links */
.nav-red { color: red !important; }
.nav-blue { color: blue !important; }
.nav-purple { color: purple !important; }
.nav-red:hover, .nav-red:focus { background: rgba(255, 0, 0, 0.1); }
.nav-blue:hover, .nav-blue:focus { background: rgba(0, 0, 255, 0.1); }
.nav-purple:hover, .nav-purple:focus { background: rgba(128, 0, 128, 0.1); }

/* Navigation */

.nav-toggle { display:none; background:none; border:1px solid #e2e8f4; cursor:pointer; padding:.65rem; border-radius:6px; }
.nav-toggle:focus { outline:2px solid var(--clr-accent); outline-offset:2px; }
.nav-toggle__bar { display:block; width:24px; height:3px; background: var(--clr-text); margin:4px 0; transition: var(--transition); border-radius:2px; }
.nav-toggle[aria-expanded="true"] .nav-toggle__bar:nth-child(1) { transform: translateY(7px) rotate(45deg); }
.nav-toggle[aria-expanded="true"] .nav-toggle__bar:nth-child(2) { opacity: 0; }
.nav-toggle[aria-expanded="true"] .nav-toggle__bar:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

/* Header actions */
.header-actions { margin-left:auto; display:flex; align-items:center; gap:.5rem; }

@media (max-width: 900px) {
  .header-inner { position: relative; }
  .site-nav {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: #111;
    border-bottom: 1px solid #333;
    box-shadow: 0 22px 40px -24px rgba(11, 59, 255, 0.35);
    visibility: hidden;
    opacity: 0;
    transform: translateY(-10px);
    transition: opacity var(--transition), transform var(--transition);
    pointer-events: none;
    border-radius: 0 0 14px 14px;
    z-index: 150;
    max-height: calc(100vh - 64px);
    overflow-y: auto;
  }
  .site-nav.open {
    visibility: visible;
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }
  .site-nav ul {
    flex-direction: column;
    align-items: stretch;
    gap: 0;
    padding: .75rem 0;
  }
  .site-nav li { border-bottom: 1px solid #333; }
  .site-nav li:last-child { border-bottom: none; }
  .nav-toggle { display:block; margin-left:auto; position:relative; z-index: 200; }
  .site-nav a {
    padding: 1rem 1.2rem;
    font-size: 1.05rem;
    width: 100%;
  }
  .site-nav a::after { display: none; }
  .site-nav a:hover,
  .site-nav a:focus,
  .site-nav a.active {
    background: var(--clr-surface-alt);
    border-radius: 0;
  }
}

/* Hero */
.hero { padding: clamp(2.5rem, 8vh, 4.25rem) 0 2.5rem; background: #000000; }
.hero__inner { display:grid; gap:3rem; align-items:center; grid-template-columns:repeat(auto-fit,minmax(320px,1fr)); }
.hero h1 { font-size:clamp(2.3rem,5vw,3rem); line-height:1.05; margin:0 0 1rem; letter-spacing:-1px; }
.lead { font-size:1.12rem; max-width:54ch; }
.hero__cta { margin-top:1.85rem; display:flex; gap:1rem; flex-wrap:wrap; }

/* Buttons */
.btn { --btn-bg: var(--clr-surface-alt); --btn-color: var(--clr-text); display:inline-block; padding:.85rem 1.25rem; font-weight:600; border-radius:8px; text-decoration:none; position:relative; overflow:hidden; transition: var(--transition); border:1px solid #d6deec; background: var(--btn-bg); color: var(--btn-color); }
.btn--primary { --btn-bg: var(--clr-accent); --btn-color:#fff; border-color: var(--clr-accent); }
.btn--outline { background:transparent; border:2px solid var(--clr-accent); color: var(--clr-accent); }
.btn:hover { filter:brightness(1.06); transform:translateY(-3px); box-shadow: var(--shadow-sm); text-decoration:none; }
.btn--outline:hover { background: var(--clr-accent); color:#fff; }

/* Sections */
.section { padding:3.75rem 0; }
.section--alt { background:#0a0a0a; }
.section__header h2 { margin:0 0 .65rem; font-size:1.95rem; letter-spacing:-.5px; }
.muted { color: var(--clr-muted); }

/* Section spacing adjustments for content pages */
.content article > .section:first-of-type {
  padding-top: 0;
}

.content article > .section:last-of-type {
  padding-bottom: 2rem;
}

/* Grid */
.grid { display:grid; gap:2rem; }
.grid--3 { grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); }
.grid--2 { grid-template-columns:repeat(auto-fit,minmax(320px,1fr)); }

/* Cards */
.card { background: var(--clr-surface); padding:1.4rem 1.2rem 1.55rem; border-radius:14px; position:relative; border:1px solid #333; box-shadow: 0 0 0 0 rgba(0,0,0,0); transition: var(--transition); }
.card:hover { box-shadow: var(--shadow-md); transform:translateY(-6px); }
.card h3 { margin:.2rem 0 .55rem; font-size:1.07rem; letter-spacing:.25px; }
.card__link { margin-top:.6rem; display:inline-block; font-weight:600; }

/* Checklist */
.checklist { list-style:none; padding:0; margin:1rem 0 0; }
.checklist li { position:relative; padding-left:1.7rem; margin:.55rem 0; }
.checklist li:before { content:""; position:absolute; left:0; top:.45rem; width:1rem; height:1rem; background:linear-gradient(135deg,#3d7bfd,#2756c7); border-radius:3px; box-shadow:0 0 0 3px rgba(61,123,253,.18); }

/* CTA Tile */
.cta-tile { background: linear-gradient(135deg,#3d7bfd,#325dcb); padding:1.65rem 1.4rem 1.9rem; border-radius:18px; color:#fff; box-shadow: var(--shadow-md); }
.cta-tile h3 { margin-top:0; font-size:1.25rem; }
.cta-tile .btn { background:#fff; color:#0d2866; border:0; }
.cta-tile .btn:hover { color:#0d2866; }

/* Scroll reveal */
.reveal { opacity:0; transform:translateY(28px); transition: var(--transition); }
.reveal.visible { opacity:1; transform:translateY(0); }

/* Footer */
.site-footer { background: #111111; padding:2.75rem 0 2.5rem; margin-top:3.5rem; border-top:1px solid #333; }
.footer__inner { display:flex; flex-direction:column; gap:2.5rem; align-items:stretch; }
.footer-nav { list-style:none; display:flex; gap:1.1rem; margin:0; padding:0; }
.footer-nav a { color: var(--clr-muted); }
.footer-nav a:hover { color: var(--clr-text); }

/* Modern footer */
.footer__grid { display:grid; gap:clamp(1.5rem, 2.5vw, 2.75rem); grid-template-columns:repeat(3,minmax(0,1fr)); align-items:start; width:100%; }
@media (max-width: 900px) {
  .footer__grid { grid-template-columns: repeat(auto-fit,minmax(220px,1fr)); }
}
.footer__grid > div { display:flex; flex-direction:column; gap:.65rem; }
.footer-brand { font-weight:700; font-size:1rem; margin:0 0 .5rem; }
.footer-text { color: var(--clr-muted); margin:.35rem 0; }
.footer-links { list-style:none; padding:0; margin:0; display:grid; gap:.45rem; }

/* Responsive Video Embed */
.video-container {
  position: relative;
  width: 100%;
  max-width: 800px;
  margin: 2rem auto;
  padding-bottom: 56.25%; /* 16:9 aspect ratio */
  height: 0;
  overflow: hidden;
  border-radius: 14px;
  box-shadow: 0 4px 18px -2px rgba(10,27,75,.18);
}
.video-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 0;
}
.footer-links a { color: var(--clr-text); text-decoration:none; border-bottom:1px dashed transparent; }
.footer-links a:hover { text-decoration:none; border-bottom-color:#b9c7ea; }
.footer-license { display:flex; justify-content:space-between; align-items:center; margin-top:1rem; padding-top:1.2rem; border-top:1px solid #e2e8f4; color: var(--clr-muted); font-size:.95rem; flex-wrap:wrap; gap:.75rem; }

/* Content pages */
main article h1, main h1.page-title { font-size:2.15rem; margin:0 0 1rem; letter-spacing:-1px; }
.content article { max-width:100%; }
.content p { margin:1rem 0; }
.content h2 { margin:2rem 0 .9rem; font-size:1.55rem; letter-spacing:-.5px; }
.content h3 { margin:1.9rem 0 .75rem; font-size:1.22rem; }
.content code { background: var(--clr-surface-alt); padding:.2rem .45rem; border-radius:4px; font-size:.85rem; }
.content pre { background: var(--clr-surface-alt); padding:1rem; overflow:auto; border-radius: var(--radius-sm); }
.content table { width:100%; border-collapse:separate; border-spacing:0; margin:1.25rem 0; border:1px solid #dbe3f1; border-radius:12px; overflow:hidden; }
.content th, .content td { padding:.75rem .9rem; border-top:1px solid #e8eef9; text-align:left; }
.content thead th { background:#f0f4ff; border-top:none; font-weight:700; }
.content tbody tr:nth-child(even) { background:#fafcff; }
.content tbody tr:hover { background:#f2f7ff; }
.table-wrap { width:100%; overflow-x:auto; }

/* Reading measure: cap line length for long-form text without constraining components */
.content p,
.content ul,
.content ol,
.content blockquote {
  max-width: var(--measure);
}

/* Do not constrain structured components */
.content .grid,
.content .phase-timeline,
.content .defense-layers,
.content .coverage-matrix,
.content .flow-steps,
.content .table-wrap,
.content table,
.content pre {
  max-width: none;
}

/* Page hero */
.page-hero { padding:3rem 0 2rem; background: linear-gradient(135deg, #ffeaea 0%, #fff5f5 100%); text-align:center; margin-bottom:0; color: #000; }
.page-hero--red { background: linear-gradient(135deg, #ffeaea 0%, #fff5f5 100%); }
.page-hero--blue { background: linear-gradient(135deg, #e6f3ff 0%, #f0f8ff 100%); }
.page-hero--purple { background: linear-gradient(135deg, #f3e8ff 0%, #faf5ff 100%); }
.page-hero .page-title { margin-bottom:1rem; }
.page-hero .lead { max-width:60ch; margin:0 auto; }

/* Card icons */
.card-icon { font-size:2rem; margin-bottom:.5rem; }

/* Phase timeline */
.phase-timeline { display:grid; gap:1.25rem; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
.phase-card { background: var(--clr-surface); padding:1.5rem; border-radius:12px; border:1px solid #e1e9f5; position:relative; }
.phase-number { position:absolute; top:-.5rem; left:1rem; width:2rem; height:2rem; background:#e53e3e; color:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:.9rem; }
.phase-card h3 { margin:.5rem 0 .3rem 2.5rem; font-size:1.1rem; }
.phase-card p { margin:.3rem 0; color: var(--clr-muted); }
.phase-card small { display:block; margin-top:.5rem; color: var(--clr-text); font-weight:600; }

@media (max-width: 768px) {
  .phase-timeline { grid-template-columns: 1fr; gap: 1rem; }
}

/* Defense layers */
.defense-layers { display:grid; gap:1rem; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
.layer-card { background: var(--clr-surface); padding:1.2rem; border-radius:10px; border:1px solid #e1e9f5; text-align:center; }
.layer-card h3 { margin:0 0 .5rem; font-size:1.1rem; }
.layer-card p { margin:0; color: var(--clr-muted); }

@media (max-width: 768px) {
  .defense-layers { grid-template-columns: 1fr; }
}

/* Metric cards */
.metric-card { background: var(--clr-surface); padding:1.2rem; border-radius:10px; border:1px solid #e1e9f5; }
.metric-card h3 { margin:0 0 .5rem; font-size:1.05rem; }
.metric-card p { margin:0 0 .5rem; color: var(--clr-muted); }
.metric-direction { display:inline-block; padding:.2rem .5rem; background:#3182ce; color:#fff; border-radius:4px; font-size:.8rem; font-weight:600; }

/* Playbook steps */
.playbook-steps { list-style:none; padding:0; margin:1rem 0; }
.playbook-steps li { margin:1rem 0; padding-left:1.5rem; position:relative; }
.playbook-steps li::before { content: counter(step-counter); counter-increment: step-counter; position:absolute; left:0; top:0; width:1.2rem; height:1.2rem; background:#3182ce; color:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:.8rem; font-weight:700; }
.playbook-steps { counter-reset: step-counter; }

/* Flow steps */
.flow-steps { display:grid; gap:1rem; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
.flow-step { background: var(--clr-surface); padding:1.2rem; border-radius:10px; border:1px solid #e1e9f5; text-align:center; }
.flow-icon { font-size:2rem; margin-bottom:.5rem; }
.flow-step h3 { margin:0 0 .5rem; font-size:1.1rem; }
.flow-step p { margin:0; color: var(--clr-muted); }

@media (max-width: 768px) {
  .flow-steps { grid-template-columns: 1fr; }
}

/* Coverage matrix */
.coverage-matrix { display:grid; gap:.5rem; }
.matrix-row { display:grid; grid-template-columns: 2fr 2fr 1fr 1fr; gap:.5rem; padding:1rem; background: var(--clr-surface); border:1px solid #e1e9f5; border-radius:8px; align-items:center; }
.technique { font-weight:600; }
.source { color: var(--clr-muted); }
.status { padding:.3rem .6rem; border-radius:4px; font-size:.8rem; font-weight:600; text-align:center; }
.status-alert { background:#d4edda; color:#155724; }
.status-progress { background:#fff3cd; color:#856404; }
.status-tuned { background:#d1ecf1; color:#0c5460; }
.status-partial { background:#f8d7da; color:#721c24; }
.playbook { text-align:center; font-weight:600; }

@media (max-width: 768px) {
  .matrix-row { grid-template-columns: 1fr; gap: 0.5rem; padding: 0.75rem; }
  .matrix-row > * { padding: 0.25rem 0; }
  .technique::before { content: "Technique: "; font-weight: 400; color: var(--clr-muted); }
  .source::before { content: "Source: "; font-weight: 600; color: var(--clr-text); }
}

/* Forms */
form { max-width:640px; }
label { display:block; font-weight:600; margin-top:1.1rem; }
input[type=text], input[type=email], textarea { width:100%; padding:.75rem .85rem; margin-top:.4rem; border:1px solid #cfd8e6; border-radius:8px; font:inherit; background:#fff; color:var(--clr-text); }
textarea { min-height:140px; resize:vertical; }
input:focus, textarea:focus { outline:2px solid #99b9ff; outline-offset:1px; }
.form-actions { display:flex; gap:1rem; flex-wrap:wrap; margin-top:1.5rem; }
.form-disclaimer { margin-top:1rem; font-size:.85rem; }

/* Utilities */
.flow > * + * { margin-top: var(--flow-space,1rem); }
.badge { display:inline-block; background: var(--clr-accent-alt); color:#3a2e00; padding:.25rem .6rem; font-size:.7rem; font-weight:600; border-radius:999px; letter-spacing:.5px; }
.hidden { display:none !important; }

/* Improve anchor scroll positioning under sticky header */
.content [id] { scroll-margin-top: 88px; }

/* Search */
.searchbar { display:flex; align-items:center; gap:.5rem; }
.searchbar input[type="search"] { width:100%; max-width:420px; padding:.7rem .9rem; border:1px solid #cfd8e6; border-radius:10px; background:#fff; color: var(--clr-text); }
.searchbar input[type="search"]:focus { outline:2px solid #99b9ff; outline-offset:2px; }

/* Form validation states */
input.error, textarea.error { border-color: var(--clr-danger); background:#fff5f5; }
.field-error { color: var(--clr-danger); font-size:.9rem; margin-top:.35rem; display:none; }
.field-error.active { display:block; }
.list--clean { list-style:none; padding:0; margin:0; }
.list--bulleted { list-style:none; padding:0 0 0 0; }
.list--bulleted li { position:relative; padding-left:1.3rem; }
.list--bulleted li::before { content:"â€¢"; position:absolute; left:0; top:0; color:#0b3bff; font-weight:700; }

/* Blog */
/* Removed blog list styles (no longer used) */

/* Content wrapper for grid layout with aside */
.content-wrapper {
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  padding: 0;
  display: block;
  position: relative;
}

/* Main article takes full width with proper container */
.content-wrapper article { 
  width: 100%;
  max-width: var(--max-width);
  margin: 0 auto;
  padding: 0 clamp(1.5rem, 4vw, 3.5rem);
}

/* Vertical divider between main and sidebar */
.content-wrapper::before {
  display: none;
}

.content-wrapper article,
.content-wrapper aside { width: 100%; }

.content-wrapper article > section {
  width: 100%;
  margin-bottom: clamp(2rem, 4vw, 3.5rem);
}

.content-wrapper article > section:last-child {
  margin-bottom: 0;
}

.content-wrapper article > section > .container {
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 0;
}

/* Sidebar: fixed position on desktop, overlay on tablets/mobile */
.content-nav {
  position: fixed;
  top: 0;
  right: -100%;
  height: 100vh;
  width: 240px;
  max-width: 25vw;
  min-width: 0;
  background: #111;
  border-left: 1px solid #333;
  box-shadow: -8px 0 30px -12px rgba(0,0,0,.35);
  padding: 2.5rem 1.75rem;
  z-index: 700;
  overflow-y: auto;
  overflow-x: hidden;
  transition: right 300ms cubic-bezier(0.4, 0, 0.2, 1);
  box-sizing: border-box;
  flex-shrink: 0;
}

.content-nav.open {
  right: 0;
}

.content-nav h3 {
  margin: 0 0 1rem;
  padding-bottom: .5rem;
  font-size: .75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--clr-muted);
  border-bottom: 1px solid #e8eef9;
}

/* Close button for sidebar */
.content-nav .close-sidebar {
  position: absolute;
  top: 1.25rem;
  right: 1.25rem;
  background: transparent;
  border: 0;
  font-size: 1.5rem;
  color: var(--clr-muted);
  cursor: pointer;
  padding: .25rem;
  line-height: 1;
  transition: color 200ms ease;
  z-index: 10;
}

.content-nav .close-sidebar:hover {
  color: var(--clr-text);
}

.content-nav ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: .25rem;
}

.content-nav li {
  margin: 0;
}

.content-nav a {
  color: var(--clr-text);
  text-decoration: none;
  font-size: .88rem;
  display: block;
  padding: .55rem .75rem;
  margin: 0;
  transition: all 200ms ease;
  border-radius: 8px;
  border-left: 3px solid transparent;
  position: relative;
}

.content-nav a:hover,
.content-nav a:focus {
  color: var(--clr-accent);
  background: var(--clr-surface-alt);
  transform: translateX(2px);
}

.content-nav a.active {
  color: var(--clr-accent);
  background: var(--clr-surface-alt);
  border-left-color: var(--clr-accent);
  font-weight: 600;
}

/* Themed active accents for pages */
body.red .content-nav a.active { color:#c53030; border-left-color:#e53e3e; background: rgba(229, 62, 62, 0.08); }
body.blue .content-nav a.active { color:#2b6cb0; border-left-color:#3182ce; background: rgba(49, 130, 206, 0.08); }
body.purple .content-nav a.active { color:#6b46c1; border-left-color:#805ad5; background: rgba(128, 90, 213, 0.08); }

body.red .content-nav a:hover, body.red .content-nav a:focus { color:#c53030; background: rgba(229, 62, 62, 0.05); }
body.blue .content-nav a:hover, body.blue .content-nav a:focus { color:#2b6cb0; background: rgba(49, 130, 206, 0.05); }
body.purple .content-nav a:hover, body.purple .content-nav a:focus { color:#6b46c1; background: rgba(128, 90, 213, 0.05); }

/* Sidebar backdrop */
.sidebar-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(3,16,56,.4);
  backdrop-filter: blur(3px);
  opacity: 0;
  visibility: hidden;
  transition: opacity 250ms ease, visibility 250ms ease;
  z-index: 650;
}

.sidebar-backdrop.open {
  opacity: 1;
  visibility: visible;
}

/* Floating sidebar toggle button */
.btn-toggle-sidebar-fab {
  position: fixed;
  right: 5rem;
  bottom: 1rem;
  z-index: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: var(--clr-accent);
  color: #fff;
  border: 0;
  box-shadow: 0 8px 24px -8px rgba(61,123,253,.45);
  cursor: pointer;
  transition: all 220ms cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-toggle-sidebar-fab:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 12px 32px -10px rgba(61,123,253,.6);
}

.btn-toggle-sidebar-fab:active {
  transform: translateY(-1px) scale(0.98);
}

.btn-toggle-sidebar-fab svg {
  width: 22px;
  height: 22px;
  transition: transform 200ms ease;
}

.content-nav.open + .btn-toggle-sidebar-fab svg {
  transform: rotate(180deg);
}

/* Hide old layout bar - no longer used with floating toggle */
.layout-bar {
  display: none !important;
}

/* Medium tablets (768-1024px): responsive padding */
@media (min-width: 768px) and (max-width: 1024px) {
  .content-wrapper article {
    padding: 0 clamp(1.5rem, 4vw, 2.5rem);
  }
  
  .content-nav {
    width: 240px;
    max-width: 35vw;
  }
}

/* Small screens (<768px): hide sidebar toggle, show sections pill instead */
@media (max-width: 767px) {
  .content-wrapper article {
    padding: 0 1rem;
  }
  
  .btn-toggle-sidebar-fab {
    display: none;
  }
  
  .content-nav {
    display: none !important;
  }
}

/* Small-screen floating pill to open sections overlay */
.sections-pill {
  position: fixed;
  right: 1rem;
  bottom: 1rem;
  z-index: 500;
  display: none;
  align-items: center;
  gap: .5rem;
  padding: .65rem .9rem;
  border-radius: 999px;
  background: #0b3bff;
  color: #fff;
  border: 0;
  box-shadow: 0 8px 22px -10px rgba(11,59,255,.5);
  font-weight: 600;
  cursor: pointer;
  transition: transform 200ms ease, box-shadow 200ms ease;
}

.sections-pill:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 28px -12px rgba(11,59,255,.65);
}

.sections-pill svg {
  width: 18px;
  height: 18px;
}

@media (max-width: 767px) {
  .sections-pill {
    display: inline-flex;
  }
}

/* Sections overlay (restored selector) */
.sections-overlay {
  position: fixed;
  inset: 0;
  background: rgba(3,16,56,.4);
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
  opacity: 0;
  visibility: hidden;
  transition: opacity 200ms ease, visibility 200ms ease;
  z-index: 600;
}
.sections-overlay.open { opacity: 1; visibility: visible; }
.sections-sheet {
  position: absolute;
  right: 0;
  top: 0;
  height: 100%;
  width: min(86vw, 360px);
  max-width: 90vw;
  background: #fff;
  border-left: 1px solid #e1e9f5;
  box-shadow: -8px 0 30px -12px rgba(10,27,75,.25);
  padding: 1rem 1rem;
  transform: translateX(100%);
  transition: transform 250ms ease;
}
.sections-overlay.open .sections-sheet { transform: translateX(0); }
.sections-sheet h3 { margin: .25rem 0 1rem; font-size: .95rem; color: var(--clr-muted); text-transform: uppercase; letter-spacing: .5px; }
.sections-sheet .close-btn { position:absolute; top:.5rem; right:.5rem; border:0; background:transparent; font-size:1.25rem; cursor:pointer; color: var(--clr-muted); }
.sections-sheet nav ul { list-style:none; margin:0; padding:0; }
.sections-sheet nav li a { display:block; padding:.6rem .75rem; border-radius:8px; color: var(--clr-text); text-decoration:none; }
.sections-sheet nav li a:hover { background: var(--clr-surface-alt); color: var(--clr-accent); }

/* Back-to-top floating button */
.backtotop-fab {
  position: fixed;
  right: 1rem;
  bottom: 1rem;
  z-index: 520;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  border-radius: 999px;
  background: #0b3bff;
  color: #fff;
  border: 0;
  box-shadow: 0 10px 24px -12px rgba(11,59,255,.55);
  opacity: 0;
  transform: translateY(6px);
  pointer-events: none;
  transition: transform .18s ease, opacity .18s ease, box-shadow .18s ease;
}
.backtotop-fab.visible { opacity: 1; transform: translateY(0); pointer-events: auto; }
.backtotop-fab:hover { transform: translateY(-2px); box-shadow: 0 14px 30px -14px rgba(11,59,255,.65); }
.backtotop-fab svg { width: 20px; height: 20px; display: block; }

/* Responsive button positioning for all screens */
@media (max-width: 767px) {
  /* On small screens: only sections pill and back-to-top (no sidebar toggle) */
  .sections-pill {
    right: 1rem;
    bottom: 1rem;
  }
  .backtotop-fab {
    right: 1rem;
    bottom: 4.5rem;
  }
}

@media (min-width: 768px) {
  /* On larger screens: sidebar toggle and back-to-top side-by-side */
  .btn-toggle-sidebar-fab {
    right: 5rem;
    bottom: 1rem;
  }
  .backtotop-fab {
    right: 1rem;
    bottom: 1rem;
  }
}

@media (max-width: 768px) {
  .content-wrapper {
    padding: 0 1rem;
  }
  .grid { gap: 1.25rem; }
  .grid--3 { grid-template-columns: 1fr; }
  .grid--2 { grid-template-columns: 1fr; }
  .hero h1 { font-size: 2rem; }
  .page-hero .page-title { font-size: 1.85rem; }
  .section { padding: 2.5rem 0; }
  .card { padding: 1.2rem 1rem; }
}

/* Print styles: hide controls, use full width, remove divider */
@media print {
  .site-header, .site-footer, .layout-bar, .sections-pill, .sections-overlay, .backtotop-fab { display: none !important; }
  .content-wrapper { grid-template-columns: 1fr !important; padding: 0 !important; }
  .content-wrapper::before { display: none !important; }
  .content-nav { display: none !important; }
  body { color: #000; }
}
